# π Spring IOC, Container, DI, Bean?

## IOC (Inversion of Control)
μ μ–΄μ μ—­μ „μ΄λΌ λ¶€λ¥Έλ‹¤. μ•„λμ—μ„ μ»¨ν…μ΄λ„μ™€ ν•¨κ» μ„¤λ…ν•λ‹¤.

## Container
μ»¨ν…μ΄λ„λ” λ³΄ν†µ κ°μ²΄μ μƒλ…μ£ΌκΈ°, μƒμ„±λ μΈμ¤ν„΄μ¤λ“¤μ—κ² μ¶”κ°€μ μΈ κΈ°λ¥μ„ μ κ³µν•λ‹¤. μ¤ν”„λ§ μ»¨ν…μ΄λ„λ” μμ΅΄μ„±λ„ κ΄€λ¦¬ν•λ‹¤.

## Spring IOC Container - μ¤ν”„λ§ IOC μ»¨ν…μ΄λ„
μ¤ν”„λ§μ€ μ¤ν”„λ§ IOC μ»¨ν…μ΄λ„μ—μ„ μ μ–΄ κ¶ν•μ„ κ°€μ Έ κ°μ²΄ μƒμ„±, κ΄€κ³„, μμ΅΄μ„±, μƒλ…μ£ΌκΈ° κ΄€λ¦¬ ν•λ”λ° μ΄λ• μƒμ„±λ κ°μ²΄λ¥Ό μ¤ν”„λ§ Beanμ΄λΌκ³  ν•λ‹¤.

μ΄ Beanλ“¤μ€ μ‹±κΈ€ν†¤μΌλ΅ κ΄€λ¦¬λλ‹¤.

μ¦‰, κ°λ°μλ” μ΄λ° κ³Όμ •μ„ μ¤ν‚µ ν•¨μΌλ΅μ¨ λΉ„μ¦λ‹μ¤ λ΅μ§μ— μ§‘μ¤‘ν•  μ μκ² λλ‹¤.

κ·Έλ ‡λ‹¤λ©΄ μ°λ¦¬κ°€ λ§λ“  ν΄λμ¤λ¥Ό μ¤ν”„λ§ IOC μ»¨ν…μ΄λ„κ°€ κ΄€λ¦¬ν•  μ μκ² ν•λ ¤λ©΄ μ–΄λ–»κ² ν• κΉ? λ°”λ΅ BeanμΌλ΅ λ“±λ΅ν•΄ μ£Όλ©΄ λλ‹¤. BeanμΌλ΅ λ“±λ΅ν•λ” λ°©λ²•μ€ μ—¬λ¬ κ°€μ§€ λ°©λ²•μ΄ μλ”λ° μμ „μ— μ‚¬μ©ν•λ XMLμ„ ν†µν•΄ λ“±λ΅ν•λ” λ°©λ²•μ„ μ μ™Έν•κ³  μ–΄λ…Έν…μ΄μ…μ„ ν†µν•΄ λ“±λ΅ν•λ” 2κ°€μ§€ λ°©λ²•μ„ ν™•μΈν•΄ λ³΄μ.
 
## 1. BeanμΌλ΅ λ“±λ΅ν•λ” λ°©λ²•
### 1-1. Component Scan
BeanμΌλ΅ λ“±λ΅λ  μ¤€λΉ„κ°€ λ ν΄λμ¤λ“¤μ„ μ¤μΊ”ν•μ—¬ BeanμΌλ΅ λ“±λ΅ν•΄ μ£Όλ” κ³Όμ •μ΄λ‹¤.

μ¤€λΉ„κ°€ λ ν΄λμ¤λ“¤μ΄λ€ @Component μ–΄λ…Έν…μ΄μ…μ„ ν΄λμ¤μ— μ¶”κ°€ν• κ²ƒμ„ λ§ν•λ‹¤. λ§μ΄ μ‚¬μ©ν•λ” @Controller, @Service, @Repositoryλ„ λ”°λΌκ°€ λ³΄λ©΄ @Componetμ΄ μλ” κ±Έ ν™•μΈν•  μ μλ‹¤.

κ·Έλ ‡λ‹¤λ©΄ μ΄μ  ν•λ‚ λ” κ¶κΈμ¦μ΄ μƒκΈ΄λ‹¤. λ‚λ” μ»΄ν¬λ„νΈ μ¤μΊ”μ„ ν• μ μ΄ μ—†λ”λ° μ™ μ„μ μ–΄λ…Έν…μ΄μ…λ§ λ¶™μ€μ„ λΏμΈλ° BeanμΌλ΅ λ“±λ΅λ κ±ΈκΉ?

μ¤ν”„λ§λ¶€νΈ ν”„λ΅μ νΈλ¥Ό μƒμ„±ν•λ©΄ κΈ°λ³Έμ μΌλ΅ ~Application ν΄λμ¤κ°€ μƒμ„±λλ”λ° μ΄ ν΄λμ¤μ—λ” @SpringBootApplication μ–΄λ…Έν…μ΄μ…μ΄ μλ”λ° κ·Έ μ•μ„ μ‚΄ν΄λ³΄λ©΄ @ComponentScan μ–΄λ…Έν…μ΄μ…μ„ ν†µν•΄μ„ ν•΄λ‹Ή ν΄λμ¤λ¥Ό κΈ°μ¤€μΌλ΅ ν•μ„ ν¨ν‚¤μ§€λ¥Ό μ¤μΊ”ν•λ” κ±Έ μ• μ μλ‹¤.
 
### 1-2. Java config - @Configuration, @Bean
@Configuration ν΄λμ¤μ—μ„ @Bean μ–΄λ…Έν…μ΄μ…μ„ μ‚¬μ©ν•΄ μλ™μΌλ΅ μ¤ν”„λ§ μ»¨ν…μ΄λ„μ— λΉμ„ λ“±λ΅ν•λ” λ°©λ²•μ΄λ‹¤.

```java
@Configuration
public class TestConfig {
    @Bean
    public OpenApi openApi() {
        return new OpenApi();
    }
} 
```

μ„μ™€ κ°™μ΄ μλ™μΌλ΅ Beanμ„ λ“±λ΅ν•λ” κ²½μ°μ—λ” μ£Όλ΅ λ‹¤μκ³Ό κ°™μ„ λ• μ‚¬μ©ν•λ‹¤.
1. κ°λ°μκ°€ μ§μ ‘ μ μ–΄κ°€ λ¶κ°€λ¥ν• λΌμ΄λΈλ¬λ¦¬λ¥Ό λΉμΌλ΅ λ“±λ΅ν•μ—¬ μ‚¬μ©ν•  λ•
2. μ „λ²”μ„μ μΌλ΅ μ‚¬μ©λλ” ν΄λμ¤λ¥Ό λ“±λ΅ν•  λ•
3. λ‹¤ν•μ„±μ„ ν™μ©ν•μ—¬ μ—¬λ¬ κµ¬ν„μ²΄λ¥Ό λ“±λ΅ν•΄μ£Όμ–΄μ•Ό ν•  λ•

## 2. DI(Dependency Injection) - μμ΅΄μ„± μ£Όμ…
BeanμΌλ΅ λ“±λ΅ν•κ³  μ¤ν”„λ§ IOC μ»¨ν…μ΄λ„μ— μν•΄ μƒμ„±λ„ λμ—λ‹¤λ©΄, μ΄μ  μμ΅΄μ„± μ£Όμ…μ„ ν†µν•΄ μ‚¬μ©ν•  μ μλ”λ° μμ΅΄μ„± μ£Όμ…μ—λ” μ—¬λ¬ κ°€μ§€ λ°©λ²•μ΄ μλ‹¤. μ°¨λ΅€λ€λ΅ ν™•μΈν•΄ λ³΄μ.
### 2-1. ν•„λ“ μ£Όμ…
```java
@Controller
public class TestController {
    @Autowired
    private TestService testService;
}
```
### 2-2. μμ •μ(Setter) μ£Όμ…
```java
@Controller
public class TestController {

    private TestService testService;

    @Autowired
    public void setTestService(TestService testService) {
        this.testService = testService;
    }
}
```
### 2-3. μƒμ„±μ μ£Όμ…
```java
@Controller
public class TestController {

    private final TestService testService;

    public TestController(TestService testService) {
        this.testService = testService;
    }
}
```

λ‹¤λ§, ν•„λ“λ‚ Setter λ©”μ„λ“μ—μ„ μ£Όμ…μ„ μ‚¬μ©ν•λ” κ²ƒλ³΄λ‹¤ μƒμ„±μ μ£Όμ… λ°©λ²•μ΄ κ¶μ¥λλ‹¤. κ·Έ μ΄μ λ” μ•„λμ™€ κ°™λ‹¤.
1. μν™ μ°Έμ΅° λ°©μ§€ Aκ°€ Bλ¥Ό μ°Έμ΅°ν•κ³ , Bκ°€ λ‹¤μ‹ Aλ¥Ό μ°Έμ΅°ν•λ” λ¬Έμ 
2. λ¶λ³€μ„±(Immutability)
μƒμ„±μλ΅ μμ΅΄μ„±μ„ μ£Όμ…ν•  λ• finalλ΅ μ„ μ–Έν•  μ μκ³ , λ°νƒ€μ„μ—μ„ μμ΅΄μ„±μ„ μ£Όμ…λ°›λ” κ°μ²΄κ°€ λ³€ν•  μΌμ΄ μ—†μ–΄μ§€κ² λλ‹¤. λ, ν•„λ“ μ£Όμ… λ°©μ‹μ€ nullμ΄ λ§λ“¤μ–΄μ§ κ°€λ¥μ„±μ΄ μλ”λ° finalλ΅ μ„ μ–Έν• μƒμ„±μ μ£Όμ… λ°©μ‹μ€ nullμ΄ λ¶κ°€λ¥ν•λ‹¤.

### Reference
- https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-introduction
